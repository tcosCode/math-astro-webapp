---
import Layout from "../../layouts/Layout.astro";
import { topics } from "../../data/topics";
import Pencil from "../../components/icons/Pencil.astro";
import ArrowRight from "../../components/icons/ArrowRight.astro";
import ArrowRedoRight from "../../components/icons/ArrowRedoRight.astro";

// Define la función getStaticPaths
export function getStaticPaths() {
  const paths: Array<{ params: { grade: string; exercise: string } }> = [];

  // Genera rutas dinámicas basadas en los datos disponibles
  const grades = ["7mo", "8vo", "9no", "10mo", "11no", "12vo"];
  grades.forEach((grade) => {
    topics.forEach((topic) => {
      if (topic.title === grade) {
        topic.exercises.forEach((exercise) => {
          paths.push({ params: { grade, exercise: exercise.id } });
        });
      }
    });
  });

  return paths;
}

const { grade, exercise } = Astro.params;
---

<Layout title={`Grado ${grade} | Ejercicio ${exercise}`}>
  <h1><Pencil />Ejercicio No{exercise} de grado {grade}</h1>

  <!-- Espacio de retroalimentación -->
  <div id="feedback"></div>

  <!-- Botón para continuar al próximo ejercicio -->
  <button
    id="continueButton"
    onclick="continueExercise()"
    style="display: none"
  >
    <div>
      <ArrowRight />
      <span>Continuar al próximo ejercicio</span>
    </div>
  </button>

  <!-- Botón para reiniciar el ejercicio -->
  <button id="retryButton" onclick="retry()" style="display: none">
    <div>
      <ArrowRedoRight />
      <span>Intentarlo de nuevo</span>
    </div>
  </button>

  <!-- Sección de ejercicios -->
  <section id="exercise1">
    <h2>
      <svg
        class="svg"
        id="icon-pencil"
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 512 512"
      >
        <!--!Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.-->
        <path
          d="M410.3 231l11.3-11.3-33.9-33.9-62.1-62.1L291.7 89.8l-11.3 11.3-22.6 22.6L58.6 322.9c-10.4 10.4-18 23.3-22.2 37.4L1 480.7c-2.5 8.4-.2 17.5 6.1 23.7s15.3 8.5 23.7 6.1l120.3-35.4c14.1-4.2 27-11.8 37.4-22.2L387.7 253.7 410.3 231zM160 399.4l-9.1 22.7c-4 3.1-8.5 5.4-13.3 6.9L59.4 452l23-78.1c1.4-4.9 3.8-9.4 6.9-13.3l22.7-9.1 0 32c0 8.8 7.2 16 16 16l32 0zM362.7 18.7L348.3 33.2 325.7 55.8 314.3 67.1l33.9 33.9 62.1 62.1 33.9 33.9 11.3-11.3 22.6-22.6 14.5-14.5c25-25 25-65.5 0-90.5L453.3 18.7c-25-25-65.5-25-90.5 0zm-47.4 168l-144 144c-6.2 6.2-16.4 6.2-22.6 0s-6.2-16.4 0-22.6l144-144c6.2-6.2 16.4-6.2 22.6 0s6.2 16.4 0 22.6z"
        ></path>
      </svg>
      <span>Ejercicio 1.-</span>
    </h2>
    <p>
      Descomponer en factores. Trabaje en su libreta y luego seleccione una
      opción como resultado:
    </p>
    <img
      src="./img/trinomio.jpg"
      width="10%"
      alt="Imagen del trinomio"
      style="display: none"
    />

    <!-- Opciones de respuesta utilizando CSS Grid -->
    <div class="grid-container">
      <!-- Ejercicio 1 -->
      <div class="grid-item">
        <p><strong>a) 8a - 8b</strong></p>
        <button
          class="option-btn"
          onclick="validateAnswer(0, 'incorrect', this)"
        >
          (a - 8)(b - 8)
        </button>
        <button
          class="option-btn"
          onclick="validateAnswer(0, 'incorrect', this)"
        >
          8(a - 8b)
        </button>
        <button class="option-btn" onclick="validateAnswer(0, 'correct', this)">
          8(a - b)
        </button>
      </div>

      <!-- Se repiten los ejercicios similares usando el índice de ejercicio -->
      <!-- Ejercicio 2 -->
      <div class="grid-item" style="display: none">
        <p>
          <strong>b) x<sup>2</sup> - 2x - 48</strong>
        </p>
        <button
          class="option-btn"
          onclick="validateAnswer(1, 'incorrect', this)"
        >
          (x - 8)(x - 6)
        </button>
        <button class="option-btn" onclick="validateAnswer(1, 'correct', this)">
          (x - 8)(x + 6)
        </button>
        <button
          class="option-btn"
          onclick="validateAnswer(1, 'incorrect', this)"
        >
          D &lt; 0
        </button>
      </div>
      <!-- Ejercicio 3 -->
      <div class="grid-item" style="display: none">
        <p>
          <strong>c) y<sup>2</sup> - 49</strong>
        </p>
        <button
          class="option-btn"
          onclick="validateAnswer(2, 'incorrect', this)"
        >
          (y + 7)(y - 7)
        </button>
        <button
          class="option-btn"
          onclick="validateAnswer(2, 'incorrect', this)"
        >
          (y + 7)(y + 7y)
        </button>
        <button class="option-btn" onclick="validateAnswer(2, 'correct', this)">
          (y - 7)(y + 7)
        </button>
      </div>

      <!-- Ejercicio 4 -->
      <div class="grid-item" style="display: none">
        <p>
          <strong>d) 2m<sup>2</sup> - 17m - 48</strong>
        </p>
        <button
          class="option-btn"
          onclick="validateAnswer(3, 'incorrect', this)"
        >
          (2m + 1)(m + 8)
        </button>
        <button class="option-btn" onclick="validateAnswer(3, 'correct', this)">
          (2m - 1)(m - 8)
        </button>
        <button
          class="option-btn"
          onclick="validateAnswer(3, 'incorrect', this)"
        >
          (2m + 1)(m - 8)
        </button>
      </div>

      <!-- Ejercicio 5 -->
      <div class="grid-item" style="display: none">
        <p>
          <strong>e) y<sup>2</sup> - 7</strong>
        </p>
        <button
          class="option-btn"
          onclick="validateAnswer(4, 'incorrect', this)"
        >
          (y - 7<sup>1/2</sup>)(y - 7<sup>1/2</sup>)
        </button>
        <button
          class="option-btn"
          onclick="validateAnswer(4, 'incorrect', this)"
        >
          (y + 7<sup>1/2</sup>)(y + 7<sup>1/2</sup>)
        </button>
        <button class="option-btn" onclick="validateAnswer(4, 'correct', this)">
          (y + 7<sup>1/2</sup>)(y - 7<sup>1/2</sup>)
        </button>
      </div>

      <!-- Ejercicio 6 -->
      <div class="grid-item" style="display: none">
        <p>
          <strong>f) 5n<sup>2</sup> + 12n + 4</strong>
        </p>
        <button
          class="option-btn"
          onclick="validateAnswer(5, 'incorrect', this)"
        >
          (5n + 2)(n - 2)
        </button>
        <button class="option-btn" onclick="validateAnswer(5, 'correct', this)">
          (5n + 2)(n + 2)
        </button>
        <button
          class="option-btn"
          onclick="validateAnswer(5, 'incorrect', this)"
        >
          (5n - 2)(n + 2)
        </button>
      </div>

      <!-- Ejercicio 7 -->
      <div class="grid-item" style="display: none">
        <p>
          <strong>g) x<sup>2</sup> - x + 8</strong>
        </p>
        <button class="option-btn" onclick="validateAnswer(6, 'correct', this)">
          D &lt; 0
        </button>
        <button
          class="option-btn"
          onclick="validateAnswer(6, 'incorrect', this)"
        >
          (x + 2)(x + 4)
        </button>
        <button
          class="option-btn"
          onclick="validateAnswer(6, 'incorrect', this)"
        >
          (x - 2)(x + 4)
        </button>
      </div>

      <!-- Ejercicio 8 -->
      <div class="grid-item" style="display: none">
        <p>
          <strong>h) v<sup>2</sup> - 36 + 12v</strong>
        </p>
        <button class="option-btn" onclick="validateAnswer(7, 'correct', this)">
          (v - 14.4)(v - 2.4)
        </button>
        <button
          class="option-btn"
          onclick="validateAnswer(7, 'incorrect', this)"
        >
          (v + 14.4)(v + 2.4)
        </button>
        <button
          class="option-btn"
          onclick="validateAnswer(7, 'incorrect', this)"
        >
          (v + 14.4)(v - 2.4)
        </button>
      </div>
    </div>
  </section>

  <script src="../../utils/scriptExerciseChooseAnswer.ts"></script>
</Layout>

<style>
  .svg {
    width: 1em; /* Adopta el tamaño del texto usando unidades relativas */
    height: 1em; /* Mantiene la relación de aspecto del icono */
    fill: currentColor; /* Utiliza el color actual del texto */
  }
  @media (max-width: 768px) {
    .svg {
      width: 1em; /* Adopta el tamaño del texto usando unidades relativas */
      height: 1em; /* Mantiene la relación de aspecto del icono */
      fill: currentColor; /* Utiliza el color actual del texto */
      align-items: center;
      justify-content: center;
    }
  }

  h2 {
    display: flex;
    align-items: center;
    gap: 10px;
    font-size: 28px;
    color: #333;
  }

  p {
    font-size: 18px;
    color: #555;
  }

  .grid-container {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 20px;
    margin-top: 20px;
  }

  .grid-item {
    background-color: #f9f9f9;
    padding: 20px;
    border: 1px solid #ddd;
    border-radius: 8px;
    text-align: left;
  }

  .option-btn {
    background-color: #f0f0f0;
    border: 2px solid #ccc;
    padding: 10px 15px;
    font-size: 16px;
    cursor: pointer;
    margin-top: 10px;
    width: 100%;
    transition:
      background-color 0.3s ease,
      transform 0.3s ease;
  }

  .option-btn:hover {
    background-color: #e7e7e7;
    transform: scale(1.05);
  }

  .correct {
    background-color: #5cb85c;
    color: white;
    border-color: #4cae4c;
  }

  .incorrect {
    background-color: #d9534f;
    color: white;
    border-color: #d43f3a;
  }

  #retryButton,
  #continueButton,
  #resetall-btn {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-top: 20px;
    padding: 10px 20px;
    font-size: 18px;
    background-color: #007bff;
    color: white;
    border: none;
    cursor: pointer;
    transition: background-color 0.3s ease;
  }

  #retryButton > div,
  #continueButton > div,
  #resetall-btn > div {
    display: flex;
    align-items: center;
    gap: 10px;
  }

  #retryButton:hover,
  #continueButton:hover,
  #resetall-btn:hover {
    background-color: #0056b3;
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }

  .correct,
  .incorrect {
    animation: fadeIn 0.5s ease;
  }
</style>
