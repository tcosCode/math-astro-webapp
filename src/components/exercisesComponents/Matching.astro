---
interface MatchingProps {
  text: string;
  pairId: number;
  length: number;
}

const { text, pairId, length } = Astro.props as MatchingProps;
---

<div class="grid-item" data-length={length}>
  <!-- Opciones de respuesta utilizando CSS Grid -->

  <div class="card" data-validation={pairId}>
    <span set:html={text} />
  </div>
  <div id="game-over-message">¡Has encontrado todas las parejas!</div>
</div>

<script src="../../utils/scriptMatching.js"></script>

<style>
  .grid-item {
    display: flex;
    flex-direction: column;
    padding: 20px;
  }

  .card {
    padding: 2rem 1rem;
    background-color: var(--btn-option-background-color);
    border: 2px solid var(--border-btn-option);
    text-align: center;
    cursor: pointer;
    user-select: none;
    transition:
      border-color 0.3s,
      background-color 0.3s,
      transform 1.5s,
      opacity 0.3s; /* Transiciones para el borde, el zoom y la opacidad */
  }

  /* Borde azul al seleccionar */
  .selected {
    border-color: var(--primary-color);
  }

  /* Efecto de shake para cartas incorrectas */
  .incorrect {
    border-color: var(--border-incorrect-color);
    background-color: var(--incorrect-color);
    animation: vibrate 0.5s linear both;
  }

  /* Zoom out y desvanecimiento para cartas correctas */
  .correct {
    background-color: var(--correct-color);
    color: var(--white-color);
    border-color: var(--border-correct-color);
    transform: scale(0.5); /* Zoom out */
    opacity: 0; /* Desvanecer */
    pointer-events: none; /* Desactivar interacción */
  }

  /* Animación de vibrate */

  /* ----------------------------------------------
  Generated by AnimatiSS
  Licensed under FreeBSD License
  URL: https://xsgames.co/animatiss
  Twitter: @xsgames_
---------------------------------------------- */

  @keyframes vibrate {
    0% {
      transform: translate(0);
    }
    20% {
      transform: translate(-2px, 2px);
    }
    40% {
      transform: translate(-2px, -2px);
    }
    60% {
      transform: translate(2px, 2px);
    }
    80% {
      transform: translate(2px, -2px);
    }
    100% {
      transform: translate(0);
    }
  }
  /* Estilo del mensaje de finalización */
  #game-over-message {
    display: none; /* Inicialmente oculto */
    font-size: 2rem;
    color: var(--correct-color);
    margin-top: 20px;
  }
</style>
